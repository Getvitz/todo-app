{"ast":null,"code":"var _jsxFileName = \"/Users/nadya/Desktop/React/kata/src/components/app/app.js\";\nimport React, { Component } from \"react\";\nimport TaskList from \"../task-list\";\nimport NewTaskForm from \"../new-task-form\";\nimport Footer from \"../footer\";\nimport { formatDistanceToNow } from \"date-fns\"; // react -> render\n// setTimeout(1000, reRender)\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor() {\n    super(...arguments);\n    this.maxId = 100;\n    this.state = {\n      todoData: [this.createTask(\"Completed Task\"), this.createTask(\"Editing Task\"), this.createTask(\"Active Task\")],\n      filter: \"All\",\n      createTime: \"just added\" // isMounted: false,\n\n    };\n\n    this.onFilterChange = filter => {\n      this.setState({\n        filter\n      });\n    };\n\n    this.clearTasks = () => {\n      this.setState(_ref => {\n        let {\n          todoData\n        } = _ref;\n        const newArr = [];\n\n        for (let i = 0; i < todoData.length; i++) {\n          if (!todoData[i].completed) {\n            newArr.push(todoData[i]);\n          }\n        }\n\n        return {\n          todoData: newArr\n        };\n      });\n    };\n\n    this.deleteTask = id => {\n      this.setState(_ref2 => {\n        let {\n          todoData\n        } = _ref2;\n        const idx = todoData.findIndex(el => el.id === id);\n        const newArray = [...todoData.slice(0, idx), ...todoData.slice(idx + 1)];\n        return {\n          todoData: newArray\n        };\n      });\n    };\n\n    this.addTask = text => {\n      console.log(this.state.todoData); // addTask = ({label, createionDateTime}) => {\n\n      const newTask = this.createTask(text);\n      this.setState(_ref3 => {\n        let {\n          todoData\n        } = _ref3;\n        const newArr = [...todoData, newTask];\n        return {\n          todoData: newArr\n        };\n      });\n    };\n\n    this.onToggleDone = id => {\n      this.setState(_ref4 => {\n        let {\n          todoData\n        } = _ref4;\n        const idx = todoData.findIndex(el => el.id === id);\n        const oldTask = todoData[idx];\n        const newTask = { ...oldTask,\n          completed: !oldTask.completed\n        };\n        const newArray = [...todoData.slice(0, idx), newTask, ...todoData.slice(idx + 1)];\n        return {\n          todoData: newArray\n        };\n      });\n    };\n  }\n\n  componentDidMount() {\n    // this.isMounted = true;\n    this.timerID = this.tick();\n  }\n\n  componentWillUnmount() {\n    // this.isMounted = false;\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    const created = new Date();\n    this.createTime = setInterval(() => this.setState({\n      createTime: formatDistanceToNow(created, {\n        includeSeconds: true\n      })\n    }), 4000); // this.isMounted = false;\n  }\n\n  filterTasks(todoData, filter) {\n    if (filter === \"All\") return todoData;else if (filter === \"Active\") {\n      return todoData.filter(task => !task.completed);\n    } else if (filter === \"Completed\") {\n      return todoData.filter(task => task.completed);\n    }\n  }\n\n  createTask(label) {\n    console.log(this.createTime); // label, creationDateTime\n\n    return {\n      label,\n      completed: false,\n      id: this.maxId++ // createTime: this.createTime,\n\n    };\n  }\n\n  render() {\n    const {\n      todoData,\n      filter,\n      createTime\n    } = this.state;\n    const visibleTasks = this.filterTasks(todoData, filter);\n    const completedCount = todoData.filter(el => el.completed).length;\n    const leftTasksCount = todoData.length - completedCount;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"todoapp\",\n      children: [/*#__PURE__*/_jsxDEV(NewTaskForm, {\n        addTask: this.addTask,\n        createTime: createTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"main\",\n        children: [/*#__PURE__*/_jsxDEV(TaskList, {\n          todos: visibleTasks,\n          onDeleted: this.deleteTask,\n          onToggleDone: this.onToggleDone,\n          createTime: createTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {\n          leftTasksCount: leftTasksCount,\n          filter: filter,\n          onFilterChange: this.onFilterChange,\n          clearTasks: this.clearTasks\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/nadya/Desktop/React/kata/src/components/app/app.js"],"names":["React","Component","TaskList","NewTaskForm","Footer","formatDistanceToNow","App","maxId","state","todoData","createTask","filter","createTime","onFilterChange","setState","clearTasks","newArr","i","length","completed","push","deleteTask","id","idx","findIndex","el","newArray","slice","addTask","text","console","log","newTask","onToggleDone","oldTask","componentDidMount","timerID","tick","componentWillUnmount","clearInterval","created","Date","setInterval","includeSeconds","filterTasks","task","label","render","visibleTasks","completedCount","leftTasksCount"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TaskList from \"../task-list\";\nimport NewTaskForm from \"../new-task-form\";\nimport Footer from \"../footer\";\nimport { formatDistanceToNow } from \"date-fns\";\n\n// react -> render\n// setTimeout(1000, reRender)\n\nexport default class App extends Component {\n  maxId = 100;\n\n  state = {\n    todoData: [\n      this.createTask(\"Completed Task\"),\n      this.createTask(\"Editing Task\"),\n      this.createTask(\"Active Task\"),\n    ],\n    filter: \"All\",\n    createTime: \"just added\",\n    // isMounted: false,\n  };\n\n  componentDidMount() {\n    // this.isMounted = true;\n    this.timerID = this.tick();\n  }\n\n  componentWillUnmount() {\n    // this.isMounted = false;\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    const created = new Date();\n    this.createTime = setInterval(\n      () =>\n        this.setState({\n          createTime: formatDistanceToNow(created, {\n            includeSeconds: true,\n          }),\n        }),\n      4000\n    );\n    // this.isMounted = false;\n  }\n\n  onFilterChange = (filter) => {\n    this.setState({ filter });\n  };\n\n  clearTasks = () => {\n    this.setState(({ todoData }) => {\n      const newArr = [];\n      for (let i = 0; i < todoData.length; i++) {\n        if (!todoData[i].completed) {\n          newArr.push(todoData[i]);\n        }\n      }\n      return {\n        todoData: newArr,\n      };\n    });\n  };\n\n  filterTasks(todoData, filter) {\n    if (filter === \"All\") return todoData;\n    else if (filter === \"Active\") {\n      return todoData.filter((task) => !task.completed);\n    } else if (filter === \"Completed\") {\n      return todoData.filter((task) => task.completed);\n    }\n  }\n\n  createTask(label) {\n    console.log(this.createTime);\n    // label, creationDateTime\n    return {\n      label,\n      completed: false,\n      id: this.maxId++,\n      // createTime: this.createTime,\n    };\n  }\n\n  deleteTask = (id) => {\n    this.setState(({ todoData }) => {\n      const idx = todoData.findIndex((el) => el.id === id);\n\n      const newArray = [...todoData.slice(0, idx), ...todoData.slice(idx + 1)];\n      return {\n        todoData: newArray,\n      };\n    });\n  };\n\n  /**\n   * Root\n   *   - textInput <- AddTask(a,b)\n   *       | props.textInput(a,b)\n   *\n   */\n\n  addTask = (text) => {\n    console.log(this.state.todoData);\n    // addTask = ({label, createionDateTime}) => {\n    const newTask = this.createTask(text);\n    this.setState(({ todoData }) => {\n      const newArr = [...todoData, newTask];\n      return {\n        todoData: newArr,\n      };\n    });\n  };\n\n  onToggleDone = (id) => {\n    this.setState(({ todoData }) => {\n      const idx = todoData.findIndex((el) => el.id === id);\n      const oldTask = todoData[idx];\n      const newTask = { ...oldTask, completed: !oldTask.completed };\n      const newArray = [\n        ...todoData.slice(0, idx),\n        newTask,\n        ...todoData.slice(idx + 1),\n      ];\n      return {\n        todoData: newArray,\n      };\n    });\n  };\n\n  render() {\n    const { todoData, filter, createTime } = this.state;\n    const visibleTasks = this.filterTasks(todoData, filter);\n    const completedCount = todoData.filter((el) => el.completed).length;\n    const leftTasksCount = todoData.length - completedCount;\n\n    return (\n      <div className=\"todoapp\">\n        <NewTaskForm addTask={this.addTask} createTime={createTime} />\n        <section className=\"main\">\n          <TaskList\n            todos={visibleTasks}\n            onDeleted={this.deleteTask}\n            onToggleDone={this.onToggleDone}\n            createTime={createTime}\n          />\n          <Footer\n            leftTasksCount={leftTasksCount}\n            filter={filter}\n            onFilterChange={this.onFilterChange}\n            clearTasks={this.clearTasks}\n          />\n        </section>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}